{
    "$schema": "http://json-schema.org/draft-07/schema",
    "type": "object",
    "format": "categories",
    "properties": {
        "Name": {
            "type": "string",
            "description": "Identifier used for the indicator, should not match any other identifier of an indicator used in the same catalog."
        },
        "Title": {
            "type": "string",
            "description": "Title used to describe the indicator"
        },
        "EodashIdentifier": {
            "type": "string",
            "description": "Identifier that will be used within the eodash client"
        },
        "Description": {
            "type": "string",
            "format": "markdown",
            "description": "Can be either a text string (allowing markdown) or relative path (which root is taken from the <b> assets_endpoint </b> configured for the catalog) to a markdown file (with .md extension)"
        },
        "Collections": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "List of collections that will be part of the indicator, have to match file names of collections configured in the <b>collections</b> folder (without the extension)"
        },
        "Disable": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "Optional list of collections (as defined in Collections) which should load as initially disabled in the dashboard layer control"
        },
        "BaseLayers": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/layerDefinition"
            },
            "description": "Optional overwrite of default base layer definition list"
        },
        "OverlayLayers": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/layerDefinition"
            },
            "description": "Optional overwrite of default overlay layer definition list"
        },
        "CollectionGroup": {
            "type": "string",
            "description": "(Optional) identifier that can be used to group collections/indicators in eodash using the <b>collection_group</b> property for grouping in the configuration"
        },
        "Process": {
            "$ref": "#/$defs/Process",
            "description": "Configuration of the process of the collection"
        },
        "MapProjection": {
            "$ref": "#/$defs/Projection",
            "description": "Projection in which the data is visualized, defaults to projection configured in eodash"
        }
    },
    "$defs": {
        "Projection": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Name of the projection, e.g. \"EPSG\"4326"
                },
                "def": {
                    "type": "string",
                    "description": "Definition of the projection using proj4 format, e.g. \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\""
                },
                "extent": {
                    "type": "array",
                    "minItems": 4,
                    "maxItems": 4,
                    "description": "Bounding box of the projection in projected coordinates [minX, minY, maxX, maxY]"
                }
            },
            "required": [
                "name"
            ]
        },
        "Process": {
            "type": "object",
            "properties": {
                "Name": {
                    "type": "string",
                    "description": "Name of the process"
                },
                "JsonForm": {
                    "type": "string",
                    "description": "URL to the JSONform of the process"
                },
                "VegaDefinition": {
                    "type": "string",
                    "description": "URL to the Vega definition of the process"
                },
                "EndPoints": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/$defs/ProcessEndpoint"
                    },
                    "description": "List of endpoints that are used in the process"
                }
            },
            "required": [
                "Name",
                "JsonForm",
                "EndPoints"
            ]
        },
        "ProcessEndpoint": {
            "type": "object",
            "properties": {
                "Identifier": {
                    "type": "string",
                    "description": "Identifier of the endpoint"
                },
                "Url": {
                    "type": "string",
                    "description": "Processing endpoint"
                },
                "Type": {
                    "type": "string",
                    "enum": [
                        "application/geo+json",
                        "application/json",
                        "text/csv",
                        "image/png",
                        "image/tiff"
                    ],
                    "description": "MIME type of the returned data"
                },
                "EndPoint": {
                    "type": "string",
                    "description": "The type of custom endpoint e.g `eoxhub_workspaces`, `sentinelhub`, `veda` ..."
                },
                "Method": {
                    "type": "string",
                    "description": "HTTP method of the endpoint",
                    "enum": [
                        "GET",
                        "POST",
                        "PUT",
                        "DELETE",
                        "PATCH",
                        "OPTIONS"
                    ]
                },
                "Body": {
                    "type": "string",
                    "description": "URL to the body of the endpoint"
                },
                "Flatstyle": {
                    "$ref": "#/$defs/Flatstyle",
                    "description": "Flatstyle definition for a process."
                }
            },
            "required": [
                "Identifier",
                "Url",
                "Type"
            ]
        },
        "layerDefinition": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "description": " Unique identifier on catalog level"
                },
                "name": {
                    "type": "string",
                    "description": "recommended: Descriptive name to be shown on user interface"
                },
                "url": {
                    "type": "string",
                    "description": "URL of service endpoint of data"
                },
                "Attribution": {
                    "type": "string",
                    "description": "recommended: Text to be shown as attribution information for the layer, can include HTML elements",
                    "media": {
                        "type": "html"
                    }
                },
                "visible": {
                    "type": "boolean",
                    "description": "defaults to true: for baselayers only one should be set to true, rest to false"
                },
                "protocol": {
                    "type": "string",
                    "description": "protocol used for accessing the endpoint defined by url"
                }
            },
            "required": [
                "id",
                "url",
                "protocol"
            ]
        }
    },
    "required": [
        "Name",
        "Title",
        "EodashIdentifier",
        "Description",
        "Collections"
    ]
}